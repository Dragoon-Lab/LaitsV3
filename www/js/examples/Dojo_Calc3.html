<!DOCTYPE html>
<html >
<head>

	<link rel="stylesheet" href="/dijit/themes/claro/claro.css">
	<style type="text/css">
@import "/dojox/grid/resources/claroGrid.css";

/*Grid needs an explicit height by default*/
#gridDiv {
    height: 20em;
}
	</style>
	
	<script>dojoConfig = {async: true}</script>
	<script src='/dojo/dojo.js'></script>
	
	<script>
require(["dijit/form/NumberTextBox",
    "dojox/grid/DataGrid", "dijit/form/Button",
    "dojo/dom", "dojo/_base/window", "dojo/data/ItemFileWriteStore",
    "dojo/store/Memory","dijit/form/SimpleTextarea", "dojo/_base/lang","dojo/domReady!"
], function(NumberTextBox, DataGrid, Button, dom, win, ItemFileWriteStore, Memory, SimpleTextarea, lang){

    var initialValueBox = new NumberTextBox({
        name: "initialValue",
        value: "0.0",
        constraints: {pattern: "0.###;-0.###"}
  }, "initialValue");
    var formulaBox = new SimpleTextarea({
        name: "formula",
        rows: "4",
        cols: "30",
        style: "width:auto;"
    }, "formula");
    formulaBox.set("value", "");

    var data = {
    	identifier: "value",
        items: [{ value: "birth rate"},
    	    	{ value: "births"}]};

    var store = new ItemFileWriteStore({data: data});	
    var layout = [[{'name': 'Available Inputs:', 'field': 'value', 'width': '100px'}]];
	var grid = new DataGrid({
		id: 'grid',
		store: store,
		structure: layout,
		rowSelector: '0px',
		autoHeight: true,
		onClick: function(e){
			var old = formulaBox.get("value");
			formulaBox.set("value", old + grid._getItemAttr(e.rowIndex, 'value'));
		}});
	grid.placeAt("gridDiv");
	grid.startup();

    var n = 0;
	new Button({
		onClick: function(){
			store.newItem({value:"New Node " + n++});
		}
	}, "newNode");

});
	</script>

</head>
<body class="claro">
    <label for="initialValue">Initial value =</label>
<input id="initialValue" type="text" /><br />
<div id="gridDiv"></div>
<p><button id="newNode" type="button">Create Node</button></p>
<label for="formula">Next value =</label>
<textarea id="formula" /> 
</body>
</html>